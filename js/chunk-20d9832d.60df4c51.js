(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20d9832d"],{1440:function(e,t,a){"use strict";var i=a("1bbf"),r=a.n(i);r.a},"1bbf":function(e,t,a){},"1e31":function(e,t,a){"use strict";var i=a("a39e"),r=a.n(i);r.a},"5fc4":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("l-map",{staticClass:"oehu-map",attrs:{zoom:e.map.zoom,center:e.map.center,options:{zoomControl:!0,touchZoom:!0,scrollWheelZoom:!1,doubleClickZoom:!0,boxZoom:!0}},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},[a("l-tile-layer",{attrs:{url:e.map.url,attribution:e.map.attribution}}),e._l(e.markers,function(t){return a("l-marker",{key:t.id,attrs:{icon:e.LIcon,"lat-lng":t.position}},[a("LTooltip",{attrs:{content:t.tooltip}})],1)})],2)],1)},r=[],n=a("458e"),c=a("e11e"),o=a.n(c),s={name:"Map",components:{LMap:n["LMap"],LTileLayer:n["LTileLayer"],LMarker:n["LMarker"],LTooltip:n["LTooltip"]},props:["markers"],data:function(){return{map:{zoom:7,currentZoom:10,center:{lat:52.0182305,lng:4.6910549},currentCenter:{lat:52.0182305,lng:4.6910549},url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'},LIcon:o.a.icon({iconUrl:"/marker-icon.png",iconRetinaUrl:"/marker-icon-2x.png",iconSize:[50,50],iconAnchor:[25,25],popupAnchor:[0,0]})}},methods:{zoomUpdate:function(e){this.map.currentZoom=e},centerUpdate:function(e){this.map.currentCenter=e}}},d=s,l=(a("e522"),a("2877")),u=Object(l["a"])(d,i,r,!1,null,"c31ff5d0",null);u.options.__file="Map.vue";t["a"]=u.exports},"7c20":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device-data-list flex flex-wrap"},e._l(e.transactions,function(t){return a("div",{staticClass:"device-data-list_item"},[a("div",{staticClass:"lastUpdateFormatted"},[e._v("\n      "+e._s(t.metadata.metadata.lastUpdateFormatted)+"\n    ")]),a("div",{staticClass:"electricityReceived"},[a("label",[e._v("Electricity received")]),a("small",[e._v("Total")]),a("span",[e._v(e._s(t.metadata.metadata.electricityReceived.total?t.metadata.metadata.electricityReceived.total.toFixed(2):0))]),a("small",[e._v("Tariff1")]),a("span",[e._v(e._s(t.metadata.metadata.electricityReceived.tariff1?t.metadata.metadata.electricityReceived.tariff1.toFixed(2):0))]),a("small",[e._v("Tariff2")]),a("span",[e._v(e._s(t.metadata.metadata.electricityReceived.tariff2?t.metadata.metadata.electricityReceived.tariff2.toFixed(2):0))])]),a("div",{staticClass:"electricityDelivered"},[a("label",[e._v("Electricity delivered")]),a("small",[e._v("Total")]),a("span",[e._v(e._s(t.metadata.metadata.electricityDelivered.total?t.metadata.metadata.electricityDelivered.total.toFixed(2):0))]),a("small",[e._v("Tariff1")]),a("span",[e._v(e._s(t.metadata.metadata.electricityDelivered.tariff1?t.metadata.metadata.electricityDelivered.tariff1.toFixed(2):0))]),a("small",[e._v("Tariff2")]),a("span",[e._v(e._s(t.metadata.metadata.electricityDelivered.tariff2?t.metadata.metadata.electricityDelivered.tariff2.toFixed(2):0))])]),a("div",[a("label",[e._v("Gas received")]),e._v("\n      "+e._s(t.metadata.metadata.gasReceived)+"\n    ")])])}))},r=[],n=(a("96cf"),a("3040")),c=a("c1df"),o=a.n(c),s=a("90cd"),d=(a("495e"),a("8db5")),l=function(e){var t="https://api.oehu.org/transactions?raw=true";return t+(e?"&deviceId="+e:"")},u=function(e){var t=[],a=[];for(var i in e)void 0==a[e[i].asset.id]&&(t.push(e[i]),a[e[i].asset.id]=!0);return t},v={name:"device-data-list",props:["deviceId"],data:function(){return{transactions:[]}},components:{Button:s["a"],Title:d["a"]},methods:{getTransactions:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this,e.next=4,this.axios.get(l(this.deviceId));case 4:for(a=e.sent,i=0;i<=a.data.length-1;i++)a.data[i].metadata.metadata.lastUpdateFormatted=o()(a.data[i].metadata.metadata.lastUpdate).format("YYYY-MM-DD HH:mm:ss");t.transactions=a.data,this.deviceId||(t.transactions=u(t.transactions)),setTimeout(function(){t.getTransactions()},6e4),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.getTransactions()}},m=v,p=(a("1440"),a("2877")),f=Object(p["a"])(m,i,r,!1,null,"b4548df0",null);f.options.__file="DeviceDataList.vue";t["a"]=f.exports},8379:function(e,t,a){},a39e:function(e,t,a){},ba99:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"explorer"},[a("Logo"),a("div",{staticClass:"container"},[a("Title",{staticClass:"Title",attrs:{align:"center",title:"OEHU Data Explorer"}}),a("p",{attrs:{align:"center"}},[e._v("\n            This page shows info from all OEHU connected devices.\n        ")]),a("br"),a("Maps")],1),a("DevicesConnected"),a("DeviceDataList"),a("br"),a("br"),a("br"),a("br"),a("Footer"),a("FooterClosing")],1)},r=[],n=(a("96cf"),a("3040")),c=(a("cadf"),a("551c"),a("097d"),a("90cd")),o=a("7c20"),s=a("4c03"),d=a("0b2d"),l=a("109c"),u=a("2241"),v=a("5fc4"),m=a("e8e4"),p=a("495e"),f=a("8db5"),h={name:"dashboard",data:function(){return{data:[],isCookieSet:!1,deviceId:0,devices:[],electricityReceived:0,electricityDelivered:0,gasReceived:0}},components:{Meter:p["a"],Logo:u["a"],Button:c["a"],DeviceDataList:o["a"],DevicesConnected:d["a"],Map:v["a"],Maps:m["a"],Title:f["a"],Footer:s["a"],FooterClosing:l["a"]},methods:{start:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("http://oehu.local:8000/oehu/start");case 3:t=e.sent,console.log("Start response: ",t),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),stop:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("http://oehu.local:8000/oehu/stop");case 3:t=e.sent,console.log("Stop response: ",t),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),getDeviceData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this,e.next=4,this.axios.get("https://api.oehu.org/devices?deviceId="+this.deviceId);case 4:a=e.sent,this.handleDevicesData(a.data[0]),setTimeout(function(){t.getDeviceData()},1e4),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),handleDevicesData:function(e){this.devices.push({id:e.deviceId,position:{lat:e.metadata.metadata.location.coordinates[0],lng:e.metadata.metadata.location.coordinates[1]},electricityReceived:e.metadata.electricityReceived,electricityDelivered:e.metadata.electricityDelivered,gasReceived:e.metadata.gasReceived}),this.electricityReceived=e.metadata.metadata.electricityReceived.total,this.electricityDelivered=e.metadata.metadata.electricityDelivered.total,this.gasReceived=e.metadata.metadata.gasReceived}},mounted:function(){this.deviceId=self.$cookies.get("devices"),void 0==this.deviceId?document.location="/login":this.getDeviceData(),this.$cookies.get("devices")&&(this.isCookieSet=!0)}},g=h,_=(a("1e31"),a("2877")),b=Object(_["a"])(g,i,r,!1,null,"6fa6258c",null);b.options.__file="Explorer.vue";t["default"]=b.exports},e522:function(e,t,a){"use strict";var i=a("8379"),r=a.n(i);r.a}}]);
//# sourceMappingURL=chunk-20d9832d.60df4c51.js.map