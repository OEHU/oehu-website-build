(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39ffbd12"],{6285:function(e,t,a){e.exports=a.p+"img/oehu_setup_finish.09debccd.svg"},b8a6:function(e,t,a){"use strict";var o=a("dffd"),r=a.n(o);r.a},da7d:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("img",{staticClass:"logo",attrs:{src:a("91d3")}}),o("form-wizard",{ref:"wizard",attrs:{shape:"tab",color:"#26292d"},scopedSlots:e._u([{key:"step",fn:function(e){return o("wizard-step",{attrs:{tab:e.tab,transition:e.transition,index:e.index}})}},{key:"footer",fn:function(t){return[""==e.error?o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showNext,expression:"showNext"}]},[o("div",{staticClass:"wizard-footer-left"},[o("a",{nativeOn:{click:function(e){t.prevTab()}}},[e._v("Prev step")])]),o("div",{staticClass:"wizard-footer-right"},[o("wizard-button",{directives:[{name:"show",rawName:"v-show",value:!t.isLastStep,expression:"!props.isLastStep"}],staticClass:"wizard-footer-right",nativeOn:{click:function(e){t.nextTab()}}},[e._v("Next step")])],1)])]):e._e()]}}])},[o("tab-content",{attrs:{"before-change":e.validateLocationTab}},[o("div",{staticClass:"tab"},[o("h1",[e._v("Welcome to the OEHU setup")]),o("h2",[e._v("Step 1: Enter your location")]),o("l-map",{staticClass:"oehu-map",attrs:{zoom:e.map.zoom,center:e.map.center,options:{zoomControl:!0,touchZoom:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!0}},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate,click:e.markerClick}},[o("l-tile-layer",{attrs:{url:e.map.url,attribution:e.map.attribution}}),o("l-marker",{key:"mylocation",attrs:{icon:e.LIcon,"lat-lng":e.map.marker.position}}),o("LCircle",{key:"mylocation2",attrs:{radius:e.model.accuracy,icon:e.LIcon,"lat-lng":e.map.marker.position}})],1),o("p",{staticClass:"permisson_text"},[o("span",[e._v("\n                         • Pin your location on the map"),o("br"),e._v("\n                         • Select the accuracy for displaying and saving your data\n                    ")])]),o("vue-form-generator",{ref:"locationAccuracy",attrs:{model:e.model,schema:e.locationAccuracy,options:e.formOptions}}),o("div",{attrs:{hidden:""}},[o("vue-form-generator",{ref:"selectLocation",attrs:{model:e.model,schema:e.selectLocation,options:e.formOptions}})],1)],1)]),o("tab-content",{attrs:{"before-change":e.validateHouseholdType}},[""==e.error?o("div",{staticClass:"tab"},[o("h1",[e._v("Thank you! Just a few more steps")]),o("h2",[e._v("Step 2: Enter your Building data")]),o("vue-form-generator",{ref:"selectHouseholdType",attrs:{model:e.model,schema:e.selectHouseholdType,options:e.formOptions}})],1):o("div",[e._v("\n                "+e._s(this.error)+"\n            ")])]),o("tab-content",{attrs:{"before-change":e.validateCredentialsTab}},[""==e.error?o("div",{staticClass:"tab"},[o("h1",[e._v("Halfway there!")]),o("h2",[e._v("Step 3: Enter your credentials")]),o("p",{staticClass:"errorMessage"},[e._v(e._s(this.errorMessage))]),o("vue-form-generator",{ref:"credentialsTab",attrs:{model:e.model,schema:e.credentialsTab,options:e.formOptions}})],1):o("div",[e._v("\n                "+e._s(this.error)+"\n            ")])]),o("tab-content",{attrs:{"before-change":e.validateBackupTab}},[""==e.error?o("div",{staticClass:"tab"},[o("h1",[e._v("OEHU! Almost there!")]),o("h2",[e._v("Step 4: Save your credentials")]),o("vue-form-generator",{ref:"backupTab",attrs:{model:e.model,schema:e.backupTab,options:e.formOptions}})],1):o("div",[e._v("\n                "+e._s(this.error)+"\n            ")])]),o("tab-content",[""==e.error?o("div",{staticClass:"tab"},[o("h2",[e._v("Step 5: Well done we're processing your request")]),o("p",[e._v("Please do not refresh the page. Once its done you will get redirected to your dashboard")]),o("img",{staticClass:"setup_finish_svg",attrs:{src:a("6285"),alt:""}}),o("div",{staticClass:"loading"},[o("div"),o("div"),o("div"),o("div")])]):o("div",[e._v("\n                "+e._s(this.error)+"\n            ")])])],1)],1)},r=[],i=(a("cadf"),a("551c"),a("097d"),a("4309")),s=a.n(i),n=(a("e517"),a("458e")),l=a("e11e"),c=a.n(l),d={components:{LMap:n["LMap"],LTileLayer:n["LTileLayer"],LMarker:n["LMarker"],LCircle:n["LCircle"]},data:function(){return{deviceId:0,showNext:!1,error:"",errorMessage:"",map:{marker:{position:{lat:0,lng:0},radius:1e4},zoom:10,currentZoom:10,center:{lat:52.0182305,lng:4.6910549},currentCenter:{lat:52.0182305,lng:4.6910549},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'},LIcon:c.a.icon({iconUrl:"/marker-icon.png",iconRetinaUrl:"/marker-icon-2x.png",iconSize:[25,25]}),model:{lat:"",long:"",locationAccuracy:"town/city",accuracy:3e3,phrase:"",deviceId:28},backupTab:{fields:[{type:"input",inputType:"text",label:"• This phrase is generated by your PI",required:!0,model:"phrase",validator:s.a.validators.string},{type:"input",inputType:"text",label:"E-mail",model:"email",required:!0,validator:s.a.validators.email},{type:"input",inputType:"password",label:"Password",model:"password",required:!0,validator:s.a.validators.string}]},formOptions:{validationErrorClass:"has-error",validationSuccessClass:"has-success",validateAfterChanged:!0},selectHouseholdType:{fields:[{type:"select",label:"• Select your household type:",model:"householdType",required:!0,validator:s.a.validators.string,values:["House","Office","Storage","Factory"],selectOptions:{hideNoneSelectedText:!0}},{type:"select",label:"• Select the number of occupants:",model:"occupants",validator:s.a.validators.string,required:!0,values:["1","2","3","4","5","6","7","8","9"],selectOptions:{hideNoneSelectedText:!0}}]},selectLocation:{fields:[{type:"input",inputType:"hidden",model:"accuracy",min:100,required:!0,validator:s.a.validators.number,styleClasses:"col-xs-6"},{type:"input",inputType:"hidden",model:"lat",required:!0,validator:s.a.validators.number,styleClasses:"col-xs-6"},{type:"input",inputType:"hidden",model:"long",required:!0,validator:s.a.validators.number,styleClasses:"col-xs-6"}]},locationAccuracy:{fields:[{type:"radios",model:"locationAccuracy",values:["street","town/city","state","hidden"],required:!0,styleClasses:"locationAccuracyFormGroup"}]},credentialsTab:{fields:[{type:"input",inputType:"text",label:"• Enter your e-mail",model:"email",required:!0,validator:s.a.validators.email},{type:"input",inputType:"password",label:"• Enter your password",model:"password",required:!0,validator:s.a.validators.string}]}}},watch:{"model.locationAccuracy":{handler:function(e){"street"==e?this.model.accuracy=200:"town/city"==e?this.model.accuracy=3e3:"state"==e?this.model.accuracy=28e3:(this.model.accuracy=1e5,this.model.lat=52.31877224455515,this.model.long=2.973580237523761,this.map.marker.position.lat=this.model.lat,this.map.marker.position.lng=this.model.long,this.model.lat=this.map.marker.position.lat,this.model.long=this.map.marker.position.lng)},deep:!0},error:function(e){"Account already exists"==e&&(this.$refs.wizard.prevTab(),this.errorMessage=this.error)}},methods:{validateLocationTab:function(){return this.generateNewPhrase(),this.$refs.selectLocation.validate()},validateHouseholdType:function(){return this.registerNewDevice(),this.$refs.selectHouseholdType.validate()},validateCredentialsTab:function(){return this.registerAccount(),this.$refs.credentialsTab.validate()},validateBackupTab:function(){return this.getConfigurated(),this.$refs.backupTab.validate()},zoomUpdate:function(e){this.map.currentZoom=e},centerUpdate:function(e){this.map.currentCenter=e},markerClick:function(e){this.map.marker.position.lat=e.latlng.lat,this.map.marker.position.lng=e.latlng.lng,this.model.lat=this.map.marker.position.lat,this.model.long=this.map.marker.position.lng,this.showNext=!0},getConfigurated:function(){var e=this;this.axios.get("http://oehu.local:8000/oehu/GetConfigurated").then(function(t){!0!==t.data.configurated?e.generateNewPhrase():(e.$cookies.set("devices",e.model.deviceId),e.startRunning(),setTimeout(function(){document.location="https://oehu.org/dashboard"},5e3))}).catch(function(t){e.error=t+" in GetConfigurated",console.log(t)})},generateNewPhrase:function(){var e=this;this.axios.get("http://oehu.local:8000/oehu/GenerateNewPhrase").then(function(t){e.model.phrase=t.data.phrase}).catch(function(t){e.error=t+" in GenerateNewPhrase",console.log(t)})},startRunning:function(){this.axios.get("http://oehu.local:8000/oehu/start").then(function(e){console.log("start response: ",e)}).catch(function(e){self.error=e+" in start",console.log(e)})},registerNewDevice:function(){var e=this;this.axios.get("http://oehu.local:8000/oehu/registerDevice/OEHU/"+this.model.lat+"/"+this.model.long+"/"+this.model.accuracy+"/"+this.model.householdType+"/"+this.model.occupants).then(function(t){e.model.deviceId=t.data.deviceID}).catch(function(t){e.error=t+" in registerDevice",console.log(t)})},registerAccount:function(){var e=this;this.axios.post("https://api.oehu.org/account/register",{email:this.model.email,password:this.model.password,deviceId:this.model.deviceId}).catch(function(t){e.error=t.response.data.message,console.log(t)})}}},u=d,p=(a("b8a6"),a("2877")),h=Object(p["a"])(u,o,r,!1,null,null,null);h.options.__file="Setup.vue";t["default"]=h.exports},dffd:function(e,t,a){},e517:function(e,t,a){}}]);
//# sourceMappingURL=chunk-39ffbd12.7dd7b6f4.js.map